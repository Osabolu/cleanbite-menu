<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Order premium Nigerian yoghurt from CleanBite Empire. Fresh, creamy, and made with 100% real fruit. Discover our delicious flavours and experience sovereignty in every bite.">
    <title>CleanBite Empire | Order Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ==================== ALL YOUR EXISTING STYLES HERE ==================== */
        /* (Keep all your CSS exactly as it was) */
        :root {
            --primary: #ffd700;
            --primary-dark: #e6c200;
            --secondary: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info: #3498db;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --border-radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #f8fafc;
            color: var(--dark);
            overflow-x: hidden;
        }

        /* ==================== PARALLAX HERO SECTION ==================== */
        .parallax-hero {
            position: relative;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .parallax-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            will-change: transform;
        }

        .layer-1 {
            background: linear-gradient(135deg, #1a2634 0%, #2c3e50 100%);
            transform: translateZ(-10px) scale(2);
            z-index: 1;
        }

        .layer-2 {
            background-image: url('images/IMG_9444.jpg');
            opacity: 0.3;
            background-size: cover;
            transform: translateZ(-5px) scale(1.5);
            z-index: 2;
        }

        .layer-3 {
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.4) 100%);
            z-index: 3;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 800px;
            padding: 40px;
            animation: fadeInUp 1.5s ease;
        }

        .hero-content h1 {
            font-size: 4.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 5px 20px rgba(0,0,0,0.3);
            letter-spacing: 2px;
        }

        .hero-content h1 span {
            color: var(--primary);
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            opacity: 0.95;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .btn-hero {
            padding: 16px 40px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .btn-hero-primary {
            background: var(--primary);
            color: var(--dark);
        }

        .btn-hero-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255,215,0,0.3);
        }

        .btn-hero-secondary {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .btn-hero-secondary:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-5px);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ==================== NAVIGATION ==================== */
        .main-nav {
            position: sticky;
            top: 0;
            background: white;
            box-shadow: 0 2px 20px rgba(0,0,0,0.05);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-brand i {
            font-size: 28px;
            color: var(--primary);
        }

        .nav-brand h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .nav-brand span {
            color: var(--primary);
        }

        .nav-cart {
            position: relative;
            cursor: pointer;
        }

        .nav-cart i {
            font-size: 24px;
            color: var(--dark);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary);
            color: var(--dark);
            font-size: 12px;
            font-weight: 700;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
        }

        /* ==================== MENU GRID ==================== */
        .menu-section {
            padding: 80px 40px;
            background: white;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .section-header h2 i {
            color: var(--primary);
            margin-right: 10px;
        }

        .section-header p {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .menu-card {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 1px solid #edf2f7;
            position: relative;
        }

        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .menu-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: var(--dark);
            padding: 6px 16px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.8rem;
            z-index: 10;
        }

        .menu-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .menu-content {
            padding: 25px;
        }

        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .menu-header h3 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
        }

        .menu-price {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--success);
        }

        .menu-desc {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .menu-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 40px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: white;
            color: var(--dark);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .quantity-btn:hover {
            background: var(--primary);
            color: var(--dark);
        }

        .quantity-value {
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .btn-add {
            background: var(--primary);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-add:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* ==================== KITCHEN LIVE STREAM ==================== */
        .kitchen-stream {
            background: linear-gradient(135deg, #1a2634 0%, #2c3e50 100%);
            padding: 60px 40px;
            color: white;
        }

        .kitchen-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .kitchen-header h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .kitchen-header h2 i {
            color: var(--primary);
            margin-right: 10px;
        }

        .kitchen-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto 50px;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .stat-item i {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .stat-label {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .activity-feed {
            max-width: 100%;
            margin: 0 auto;
            background: rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 30px;
        }

        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .feed-header h3 {
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feed-header h3 i {
            color: var(--primary);
        }

        .refresh-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .refresh-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* ==================== VERTICAL ACTIVITY FEED ==================== */
        #activityFeed {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 8px;
        }

        #activityFeed::-webkit-scrollbar {
            width: 6px;
        }

        #activityFeed::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        #activityFeed::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 18px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            animation: fadeIn 0.4s ease;
        }

        .activity-item:hover {
            background: rgba(255,255,255,0.12);
            transform: translateX(4px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .activity-icon {
            width: 44px;
            height: 44px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-text {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .activity-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.7);
        }

        .activity-time, .activity-date, .activity-customer, .activity-order {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 30px;
            font-weight: 500;
        }

        .activity-customer {
            background: rgba(255,215,0,0.15);
            color: var(--primary);
        }

        .activity-order {
            background: rgba(52,152,219,0.15);
            color: #3498db;
        }

        /* ==================== ABOUT US PAGE ==================== */
        .about-section {
            padding: 100px 40px;
            background: white;
        }

        .about-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .about-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .about-header h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .about-header h2 i {
            color: var(--primary);
        }

        .about-header p {
            color: var(--gray);
            font-size: 1.2rem;
            font-weight: 300;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
            margin-bottom: 80px;
        }

        .about-image {
            position: relative;
        }

        .image-stack {
            position: relative;
            height: 500px;
        }

        .image-main {
            position: absolute;
            top: 0;
            left: 0;
            width: 85%;
            height: 85%;
            background-size: cover;
            background-position: center;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.1);
            border: 8px solid white;
        }

        .image-accent {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 60%;
            height: 60%;
            background-size: cover;
            background-position: center;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            border: 8px solid white;
            z-index: 2;
        }

        .about-content {
            padding: 20px;
        }

        .about-badge {
            display: inline-block;
            background: var(--primary);
            color: var(--dark);
            padding: 8px 24px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            letter-spacing: 2px;
            margin-bottom: 25px;
        }

        .about-content h3 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 25px;
            line-height: 1.3;
        }

        .about-text {
            margin-bottom: 30px;
        }

        .about-text p {
            color: var(--gray);
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 1rem;
        }

        .about-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-box {
            text-align: center;
            padding: 20px;
            background: #f8fafc;
            border-radius: 16px;
            border: 1px solid #edf2f7;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .about-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #fff9e6;
            border-radius: 12px;
            color: var(--dark);
            font-weight: 500;
        }

        .feature i {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .about-mission {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 60px;
        }

        .mission-card {
            text-align: center;
            padding: 40px 30px;
            background: #f8fafc;
            border-radius: 24px;
            border: 1px solid #edf2f7;
            transition: all 0.3s ease;
        }

        .mission-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            border-color: var(--primary);
        }

        .mission-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .mission-card h4 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .mission-card p {
            color: var(--gray);
            line-height: 1.7;
            font-size: 0.95rem;
        }

        /* ==================== ENHANCED FOOTER ==================== */
        .footer {
            background: #0f172a;
            color: white;
            padding: 80px 40px 30px;
            position: relative;
        }

        .footer-wave {
            position: absolute;
            top: -50px;
            left: 0;
            width: 100%;
            overflow: hidden;
            line-height: 0;
        }

        .footer-wave svg {
            position: relative;
            display: block;
            width: calc(100% + 1.3px);
            height: 50px;
        }

        .footer-wave path {
            fill: #0f172a;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1.5fr;
            gap: 60px;
            margin-bottom: 60px;
        }

        .footer-section h3 {
            color: var(--primary);
            margin-bottom: 25px;
            font-size: 1.2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-section h3 i {
            color: var(--primary);
        }

        .footer-section p {
            color: rgba(255,255,255,0.7);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            line-height: 1.7;
        }

        .footer-section a {
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .footer-section a:hover {
            color: var(--primary);
            transform: translateX(5px);
        }

        .footer-social {
            display: flex;
            gap: 20px;
            margin-top: 25px;
        }

        .footer-social a {
            width: 45px;
            height: 45px;
            background: rgba(255,255,255,0.05);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .footer-social a:hover {
            background: var(--primary);
            color: var(--dark);
            transform: translateY(-5px);
        }

        .footer-newsletter {
            margin-top: 25px;
        }

        .footer-newsletter h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .newsletter-input {
            display: flex;
            gap: 10px;
        }

        .newsletter-input input {
            flex: 1;
            padding: 12px 16px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .newsletter-input input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .newsletter-input button {
            padding: 12px 20px;
            background: var(--primary);
            border: none;
            border-radius: 12px;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .newsletter-input button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-bottom-links {
            display: flex;
            gap: 30px;
        }

        .footer-bottom-links a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-bottom-links a:hover {
            color: var(--primary);
        }

        /* ==================== MODAL STYLES ==================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 32px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 1px solid #edf2f7;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-header h3 i {
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            color: var(--danger);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 30px;
        }

        /* ==================== FORM STYLES ==================== */
        .form-section {
            margin-bottom: 30px;
        }

        .form-section h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section h4 i {
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #edf2f7;
            border-radius: 16px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 4px rgba(255,215,0,0.1);
        }

        .payment-options {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }

        .payment-option {
            flex: 1;
            position: relative;
        }

        .payment-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .payment-option label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px;
            background: #f8f9fa;
            border: 2px solid #edf2f7;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .payment-option input[type="radio"]:checked + label {
            background: #fff9e6;
            border-color: var(--primary);
            color: var(--dark);
        }

        .payment-option label i {
            font-size: 1.2rem;
            color: var(--primary);
        }

        .bank-details {
            background: #fff9e6;
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
        }

        .bank-details h4 {
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bank-info {
            background: white;
            border-radius: 16px;
            padding: 20px;
        }

        .bank-info p {
            margin-bottom: 12px;
            display: flex;
            align-items: baseline;
        }

        .bank-info strong {
            min-width: 140px;
            color: var(--dark);
        }

        .bank-info .note {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #edf2f7;
            color: var(--warning);
            font-weight: 500;
        }

        .flex {
            display: flex;
            justify-content: space-between;
        }

        .flex-image {
            height: 100px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 16px 24px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--dark);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255,215,0,0.3);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        /* ==================== CART MODAL ==================== */
        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 25px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #edf2f7;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background-size: cover;
            background-position: center;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--success);
            font-weight: 700;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #edf2f7;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .cart-quantity-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
        }

        .cart-summary {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .summary-row.total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #edf2f7;
            font-weight: 700;
            font-size: 1.2rem;
        }

        /* ==================== CONFIRMATION MODAL ==================== */
        .confirmation-icon {
            text-align: center;
            margin-bottom: 25px;
        }

        .confirmation-icon i {
            font-size: 80px;
            color: var(--success);
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .order-details {
            background: #f8f9fa;
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
        }

        .track-order-btn {
            display: inline-block;
            background: var(--primary);
            color: var(--dark);
            padding: 16px 32px;
            border-radius: 16px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .track-order-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* ==================== NOTIFICATION ==================== */
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            color: var(--dark);
            padding: 16px 24px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 9999;
            animation: slideInRight 0.3s ease;
            border-left: 4px solid var(--success);
        }

        .notification-toast.success { border-left-color: var(--success); }
        .notification-toast.warning { border-left-color: var(--warning); }
        .notification-toast.error { border-left-color: var(--danger); }

        .notification-toast i {
            font-size: 20px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* ==================== RESPONSIVE DESIGN ==================== */
        @media (max-width: 1200px) {
            .about-grid { grid-template-columns: 1fr; }
            .footer-content { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 992px) {
            .kitchen-stats { grid-template-columns: repeat(2, 1fr); }
            .about-mission { grid-template-columns: 1fr; }
            .hero-content h1 { font-size: 3rem; }
        }

        @media (max-width: 768px) {
            .main-nav { padding: 15px 20px; }
            .menu-section, .kitchen-stream, .about-section { padding: 60px 20px; }
            .footer-content { grid-template-columns: 1fr; }
            .footer-bottom { flex-direction: column; }
            .payment-options { flex-direction: column; }
            .form-actions { flex-direction: column; }
            .hero-content h1 { font-size: 2.2rem; }
            .hero-content p { font-size: 1rem; }
            .hero-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>
    <!-- ==================== PARALLAX HERO SECTION ==================== -->


    <!-- ==================== NAVIGATION ==================== -->
    <nav class="main-nav">
        <div class="nav-brand">
            <i class="fas fa-crown"></i>
            <h2>CLEAN<span>BITE</span></h2>
        </div>
        <div class="nav-cart" id="cartIcon">
            <i class="fas fa-shopping-cart"></i>
            <span class="cart-count" id="cartCount">0</span>
        </div>
    </nav>

    <!-- ==================== MENU GRID SECTION ==================== -->
    <div class="menu-section" id="menuSection">
        <div class="section-header">
            <h2><i class="fas fa-ice-cream"></i> Our Premium Yoghurt</h2>
            <p>Made fresh daily with the finest ingredients</p>
        </div>
        
        <div class="menu-grid" id="menuGrid"></div>
    </div>

    <!-- ==================== LIVE KITCHEN STREAM ==================== -->
    <div class="kitchen-stream" id="kitchenStream">
        <div class="kitchen-header">
            <h2><i class="fas fa-kitchen-set"></i> Live Kitchen Stream</h2>
            <p>Watch your order come to life in real-time</p>
        </div>
        
        <div class="kitchen-stats">
            <div class="stat-item">
                <i class="fas fa-utensils"></i>
                <div class="stat-value" id="preparingCount">0</div>
                <div class="stat-label">Preparing</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-fire"></i>
                <div class="stat-value" id="incubatingCount">0</div>
                <div class="stat-label">Incubating</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-check-circle"></i>
                <div class="stat-value" id="readyCount">0</div>
                <div class="stat-label">Ready</div>
            </div>
            <div class="stat-item">
                <i class="fas fa-flag-checkered"></i>
                <div class="stat-value" id="completedCount">0</div>
                <div class="stat-label">Completed</div>
            </div>
        </div>
        
        <div class="activity-feed">
            <div class="feed-header">
                <h3><i class="fas fa-stream"></i> Live Activity Feed</h3>
                <button class="refresh-btn" id="refreshKitchen">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            <div id="activityFeed"></div>
        </div>
    </div>

    <!-- ==================== ABOUT US PAGE ==================== -->
    

    <!-- ==================== ENHANCED FOOTER ==================== -->
    <footer class="footer">
        <div class="footer-wave">
            <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="shape-fill"></path>
            </svg>
        </div>
        
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-crown"></i> CLEANBITE EMPIRE</h3>
                <p>Premium Nigerian yoghurt crafted with passion and the finest ingredients. Since 2024, we've been serving smiles across Lagos.</p>
                <div class="footer-social">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3><i class="fas fa-clock"></i> Opening Hours</h3>
                <p><i class="far fa-calendar"></i> Monday - Friday: 8am - 8pm</p>
                <p><i class="far fa-calendar"></i> Saturday: 9am - 6pm</p>
                <p><i class="far fa-calendar"></i> Sunday: 10am - 4pm</p>
                <p style="margin-top: 15px;"><i class="fas fa-truck"></i> Delivery available within Lagos</p>
            </div>
            
            <div class="footer-section">
                <h3><i class="fas fa-link"></i> Quick Links</h3>
                <a href="#menuSection"><i class="fas fa-chevron-right"></i> Our Menu</a>
                <a href="#kitchenStream"><i class="fas fa-chevron-right"></i> Live Kitchen</a>
                <a href="#aboutUs"><i class="fas fa-chevron-right"></i> About Us</a>
                <a href="track.html" id="trackOrderLink"><i class="fas fa-chevron-right"></i> Track Order</a>
                <a href="review.html" class="footer-link"><i class="fas fa-chevron-right"></i> Review</a>
                <a href="#"><i class="fas fa-chevron-right"></i> Contact Us</a>
            </div>
            
            <div class="footer-section">
                <h3><i class="fas fa-map-marker-alt"></i> Visit Us</h3>
                <p><i class="fas fa-map-pin"></i> 23 Olorunkemi Estate, Elebu, Ibadan, Nigeria</p>
                <p><i class="fas fa-phone-alt"></i> 080-CLEANBITE</p>
                <p><i class="fas fa-envelope"></i> cleanbitekitchen.official@gmail.com</p>
                <p><i class="fas fa-globe"></i> https://osabolu.github.io/cleanbite-menu</p>
                
                <div class="footer-newsletter">
                    <h4><i class="fas fa-newspaper"></i> Subscribe to Updates</h4>
                    <div class="newsletter-input">
                        <input type="email" placeholder="Your email address">
                        <button><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div>© 2026 CleanBite Empire. All rights reserved. | Premium Nigerian Yoghurt</div>
            <div class="footer-bottom-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Shipping Policy</a>
            </div>
        </div>
    </footer>

    <!-- ==================== CART MODAL ==================== -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> Your Cart</h3>
                <button class="modal-close" id="closeCartModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="cart-items" id="cartItems"></div>
                
                <div class="cart-summary">
                    <div class="summary-row"><span>Subtotal</span><span id="cartSubtotal">₦0</span></div>
                    <div class="summary-row"><span>VAT (7.5%)</span><span id="cartVat">₦0</span></div>
                    <div class="summary-row total"><span>Total</span><span id="cartTotal">₦0</span></div>
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-secondary" id="clearCartBtn"><i class="fas fa-trash"></i> Clear Cart</button>
                    <button class="btn btn-primary" id="checkoutBtn"><i class="fas fa-lock"></i> Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== CHECKOUT MODAL ==================== -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-credit-card"></i> Complete Your Order</h3>
                <button class="modal-close" id="closeCheckoutModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="orderForm">
                    <!-- Customer Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-user"></i> Customer Information</h4>
                        
                        <div class="form-group">
                            <label for="customerName">Full Name *</label>
                            <input type="text" id="customerName" placeholder="Enter your full name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="customerPhone">Phone Number *</label>
                            <input type="tel" id="customerPhone" placeholder="e.g. 08012345678" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="customerEmail">Email Address (Optional)</label>
                            <input type="email" id="customerEmail" placeholder="your@email.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="deliveryNotes">Delivery Notes / Instructions</label>
                            <textarea id="deliveryNotes" rows="3" placeholder="Any special instructions?"></textarea>
                        </div>
                    </div>
                    
                    <!-- Payment Method -->
                    <div class="form-section">
                        <h4><i class="fas fa-credit-card"></i> Payment Method</h4>
                        
                        <div class="payment-options">
                            <div class="payment-option">
                                <input type="radio" name="payment" id="paymentTransfer" value="transfer" checked>
                                <label for="paymentTransfer"><i class="fas fa-university"></i> Bank Transfer</label>
                            </div>
                            
                            <div class="payment-option">
                                <input type="radio" name="payment" id="paymentCash" value="cash">
                                <label for="paymentCash"><i class="fas fa-money-bill-wave"></i> Cash on Pickup</label>
                            </div>
                        </div>
                        
                        <!-- Bank Transfer Details -->
                        <div class="bank-details" id="bankDetails">
                            <h4><i class="fas fa-university"></i> Bank Transfer Details</h4>
                            <div class="bank-info">
                                <p><strong>Bank:</strong> CARBON MICRO FINANCE BANK</p>
                                <p><strong>Account Name:</strong> Emmanuel Osabolu Okpere</p>
                                <p><strong>Account Number:</strong> 3034457406</p>
                                <p class="note"><span>Please use your <strong>Order ID</strong> as payment reference and send proof to our WhatsApp</p>
                                <div class="flex">
                                    <img class="flex-image"src="images/whatsapp-order.png">
                                    <p>Delivery on request
                                        <i class="fas fa-truck" style="color: var(--primary); font-size: 100px;"></i>
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cash Payment Details (hidden by default) -->
                        <div class="bank-details" id="cashDetails" style="display: none;">
                            <h4><i class="fas fa-money-bill-wave"></i> Cash on Pickup</h4>
                            <div class="bank-info">
                                <p><i class="fas fa-check-circle" style="color: #2ecc71;"></i> Pay when you collect your order</p>
                                <p><i class="fas fa-clock" style="color: #f39c12;"></i> Preparation starts after verification</p>
                                <p><i class="fas fa-map-marker-alt" style="color: #e74c3c;"></i> Pickup: CleanBite Empire, Ibadan</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="backToCart"><i class="fas fa-arrow-left"></i> Back to Cart</button>
                        <button type="submit" class="btn btn-primary" id="submitOrderBtn"><i class="fas fa-paper-plane"></i> Place Order</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ==================== CONFIRMATION MODAL ==================== -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> Order Confirmed!</h3>
                <button class="modal-close" id="closeConfirmationModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon"><i class="fas fa-check-circle"></i></div>
                
                <h3 style="text-align: center; margin-bottom: 15px;">Thank You, <span id="confirmCustomerName">Customer</span>!</h3>
                
                <div class="order-details">
                    <p style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>Order ID:</strong>
                        <span id="confirmOrderId" style="font-weight: 700; color: var(--success);">CB-000000</span>
                    </p>
                    <p style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>Payment Status:</strong>
                        <span style="font-weight: 700; color: var(--warning);">Pending Verification</span>
                    </p>
                    <p style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>Estimated Ready:</strong>
                        <span id="confirmEstimatedTime">After payment verification</span>
                    </p>
                    <p style="display: flex; justify-content: space-between;">
                        <strong>Total Amount:</strong>
                        <span id="confirmTotal" style="font-weight: 700;">₦0</span>
                    </p>
                </div>
                
                <div style="text-align: center;">
                    <p style="color: var(--gray); margin-bottom: 20px;">
                        <i class="fas fa-info-circle"></i> 
                        Your order is pending payment verification. You will receive SMS/WhatsApp confirmation once verified.
                    </p>
                    
                    <a href="#" class="track-order-btn" id="trackOrderBtn">
                        <i class="fas fa-map-marked-alt"></i> Track Order
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
    
    <script>
    // ==================== COMPLETE ORDER PAGE SCRIPT ====================
    // ALL FIXES APPLIED:
    // ✅ Place Order button stops spinning after 2 seconds
    // ✅ Order ID popup with close button
    // ✅ Track Order link works with most recent order
    // ✅ Live kitchen system working
    // ✅ Parallax scroll working
    // ✅ Cart system working
    
    // ==================== GLOBAL VARIABLES ====================
    let cart = JSON.parse(localStorage.getItem('cleanbite_cart') || '[]');
    
    // ==================== MENU DATA ====================
    const menuItems = [
        {
            id: 1,
            name: 'Plain Yoghurt',
            description: 'The Foundation: Creamy, classic plain yoghurt. Made from fresh cow milk.',
            price: 4000,
            image: 'images/sara-cervera-4caIPcmVDII-unsplash.jpg',
            badge: 'Best Seller'
        },
        {
            id: 2,
            name: 'Strawberry, Hibiscus & Dates',
            description: 'The Sentinel - Sweet strawberry flavour with real fruit pieces.',
            price: 6000,
            image: 'images/strawberry-photo.jpg',
            badge: 'Popular'
        },
        {
            id: 3,
            name: 'Vanilla, Cinnamon & Honey',
            description: 'The Warden - Smooth vanilla bean infused yoghurt.',
            price: 5000,
            image: 'https://images.unsplash.com/photo-1571212515416-fef01fc43637?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
            badge: null
        },
        {
            id: 4,
            name: 'Coconut Milk & Dates',
            description: 'Blend of Coconut Milk extract mixed with Dates puree.',
            price: 5500,
            image: 'images/coconuts-dates.jpg',
            badge: 'New'
        },
        {
            id: 5,
            name: 'Cacao, Moringa & Dates',
            description: 'Thick, strained yoghurt with high protein.',
            price: 6000,
            image: 'images/coconut-dates (1).jpg',
            badge: 'Premium'
        },
        {
            id: 6,
            name: 'The Diplomat - Coconut Milk, Roasted Plantain & Cinnamon',
            description: 'Topped with honey and crunchy granola.',
            price: 5500,
            image: 'images/plantain-puree.png',
            badge: null
        }
    ];

    // ==================== INITIALIZE PAGE ====================
    document.addEventListener('DOMContentLoaded', function() {
        console.log('🍽️ Order Page Initializing...');
        
        renderMenu();
        updateCartDisplay();
        
        // Initialize Live Kitchen System
        window.liveKitchen = new LiveKitchenSystem();
        
        setupEventListeners();
        setupParallax();
        setupTrackOrderLink(); // ✅ NEW: Setup track order link
        
        console.log('✅ Order Page Ready');
    });

    // ==================== SETUP TRACK ORDER LINK ====================
    function setupTrackOrderLink() {
        const trackLink = document.getElementById('trackOrderLink');
        
        if (trackLink) {
            trackLink.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Get all orders
                const orders = JSON.parse(localStorage.getItem('cleanbite_orders') || '[]');
                
                if (orders.length === 0) {
                    alert('No orders found to track. Please place an order first.');
                    return;
                }
                
                // Get the most recent order
                const latestOrder = orders[orders.length - 1];
                
                if (latestOrder && latestOrder.id) {
                    // Open track.html with the order ID
                    const trackUrl = `track.html?order=${latestOrder.id}`;
                    window.open(trackUrl, '_blank');
                    console.log('📍 Opening track page with order:', latestOrder.id);
                } else {
                    alert('Could not find your order. Please enter your Order ID manually.');
                    window.open('track.html', '_blank');
                }
            });
            
            console.log('✅ Track order link initialized');
        }
    }

    // ==================== RENDER MENU ====================
    function renderMenu() {
        const menuGrid = document.getElementById('menuGrid');
        if (!menuGrid) return;
        
        menuGrid.innerHTML = menuItems.map(item => `
            <div class="menu-card">
                ${item.badge ? `<span class="menu-badge">${item.badge}</span>` : ''}
                <div class="menu-image" style="background-image: url('${item.image}');"></div>
                <div class="menu-content">
                    <div class="menu-header">
                        <h3>${item.name}</h3>
                        <span class="menu-price">₦${item.price.toLocaleString()}</span>
                    </div>
                    <p class="menu-desc">${item.description}</p>
                    <div class="menu-footer">
                        <div class="quantity-selector" data-id="${item.id}">
                            <button class="quantity-btn minus" data-id="${item.id}">-</button>
                            <span class="quantity-value" id="qty-${item.id}">1</span>
                            <button class="quantity-btn plus" data-id="${item.id}">+</button>
                        </div>
                        <button class="btn-add" data-id="${item.id}">
                            <i class="fas fa-cart-plus"></i> Add
                        </button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // ==================== SETUP EVENT LISTENERS ====================
    function setupEventListeners() {
        // Cart icon
        document.getElementById('cartIcon')?.addEventListener('click', openCartModal);
        
        // Close cart modal
        document.getElementById('closeCartModal')?.addEventListener('click', () => closeModal('cartModal'));
        
        // Close checkout modal
        document.getElementById('closeCheckoutModal')?.addEventListener('click', () => closeModal('checkoutModal'));
        
        // Close confirmation modal
        document.getElementById('closeConfirmationModal')?.addEventListener('click', () => closeModal('confirmationModal'));
        
        // Back to cart button
        document.getElementById('backToCart')?.addEventListener('click', function() {
            closeModal('checkoutModal');
            openCartModal();
        });
        
        // Clear cart button
        document.getElementById('clearCartBtn')?.addEventListener('click', clearCart);
        
        // Checkout button
        document.getElementById('checkoutBtn')?.addEventListener('click', openCheckoutModal);
        
        // Payment method toggle
        document.getElementById('paymentTransfer')?.addEventListener('change', function(e) {
            if (e.target.checked) {
                document.getElementById('bankDetails').style.display = 'block';
                document.getElementById('cashDetails').style.display = 'none';
            }
        });
        
        document.getElementById('paymentCash')?.addEventListener('change', function(e) {
            if (e.target.checked) {
                document.getElementById('bankDetails').style.display = 'none';
                document.getElementById('cashDetails').style.display = 'block';
            }
        });
        
        // Menu quantity buttons (delegation)
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('plus')) {
                const id = e.target.dataset.id;
                const qtyEl = document.getElementById(`qty-${id}`);
                let qty = parseInt(qtyEl.textContent);
                qtyEl.textContent = qty + 1;
            }
            
            if (e.target.classList.contains('minus')) {
                const id = e.target.dataset.id;
                const qtyEl = document.getElementById(`qty-${id}`);
                let qty = parseInt(qtyEl.textContent);
                if (qty > 1) {
                    qtyEl.textContent = qty - 1;
                }
            }
            
            if (e.target.classList.contains('btn-add') || e.target.closest('.btn-add')) {
                const btn = e.target.classList.contains('btn-add') ? e.target : e.target.closest('.btn-add');
                const id = btn.dataset.id;
                addToCart(id);
            }
        });
        
        // ============================================
        // ✅ FIXED: submitOrderBtn - STOPS SPINNING AFTER 2 SECONDS
        // ============================================
        setupSubmitButton();
    }

    // ==================== SETUP SUBMIT BUTTON ====================
    function setupSubmitButton() {
        const submitOrderBtn = document.getElementById('submitOrderBtn');
        if (!submitOrderBtn) return;
        
        // Create fresh button
        const freshButton = document.createElement('button');
        freshButton.type = 'submit';
        freshButton.className = 'btn btn-primary';
        freshButton.id = 'submitOrderBtn';
        freshButton.innerHTML = '<i class="fas fa-paper-plane"></i> Place Order';
        
        // Replace old button
        submitOrderBtn.parentNode.replaceChild(freshButton, submitOrderBtn);
        
        freshButton.addEventListener('click', function(e) {
            e.preventDefault();
            
            console.log('🟢 ORDER BUTTON CLICKED');
            
            // Validate form
            const name = document.getElementById('customerName')?.value.trim();
            const phone = document.getElementById('customerPhone')?.value.trim();
            
            if (!name || name.length < 2) {
                alert('❌ Please enter your full name');
                return;
            }
            
            if (!phone || phone.length < 10) {
                alert('❌ Please enter a valid phone number');
                return;
            }
            
            // Get cart
            const cart = JSON.parse(localStorage.getItem('cleanbite_cart') || '[]');
            if (cart.length === 0) {
                alert('❌ Your cart is empty');
                return;
            }
            
            // Disable button & show spinner
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            this.disabled = true;
            
            // Generate order ID
            const timestamp = Date.now();
            const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            const orderId = `CB-${timestamp.toString().slice(-6)}-${random}`;
            
            // Calculate totals
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const vat = subtotal * 0.075;
            const total = subtotal + vat;
            
            const order = {
                id: orderId,
                orderId: orderId,
                customerName: name,
                customerPhone: phone,
                customerEmail: document.getElementById('customerEmail')?.value.trim() || '',
                deliveryNotes: document.getElementById('deliveryNotes')?.value.trim() || '',
                paymentMethod: document.querySelector('input[name="payment"]:checked')?.value || 'transfer',
                items: cart,
                subtotal: subtotal,
                vat: vat,
                total: total,
                totalAmount: total,
                status: 'pending-payment',
                paymentStatus: 'pending',
                createdAt: new Date().toISOString(),
                timestamp: new Date().toISOString(),
                timeline: {
                    orderPlaced: new Date().toISOString()
                }
            };
            
            console.log('📦 ORDER CREATED:', orderId);
            
           // NEW CODE - Save to Firebase instead
    function saveOrderToFirebase(order) {
        return new Promise((resolve, reject) => {
            const ordersRef = database.ref('orders');
            const newOrderRef = ordersRef.push();
            
            // Add Firebase metadata
            order.firebaseKey = newOrderRef.key;
            order.createdAt = new Date().toISOString();
            order.status = order.status || 'pending-payment';
            
            newOrderRef.set(order)
                .then(() => {
                    console.log('✅ Order saved to Firebase:', order.id);
                    resolve(order);
                })
                .catch((error) => {
                    console.error('❌ Firebase error:', error);
                    reject(error);
                });
        });
    }
    
    // In your submit button click handler, REPLACE the localStorage part with:
    saveOrderToFirebase(order).then(() => {
        // Continue with your existing success flow
        showNotification(`Order ${order.id} placed!`, 'success');
        
        // Clear cart
        cart = [];
        localStorage.setItem('cleanbite_cart', JSON.stringify(cart));
        updateCartDisplay();
        
        // Close modal
        closeModal('checkoutModal');
        
        // Show confirmation
        showOrderConfirmation(order);
    }).catch((error) => {
        showNotification('Error saving order. Please try again.', 'error');
        console.error(error);
    });
            
            // Also save to tracking storage
            const trackingOrders = JSON.parse(localStorage.getItem('cleanbite_tracking_orders') || '[]');
            trackingOrders.push(order);
            localStorage.setItem('cleanbite_tracking_orders', JSON.stringify(trackingOrders));
            
            // Send to kitchen system
            if (window.liveKitchen) {
                window.liveKitchen.handleNewOrder(order);
            }
            
            // Broadcast to admin
            localStorage.setItem('admin_new_order', JSON.stringify(order));
            localStorage.setItem('ADMIN_NEW_ORDER_FLAG', Date.now().toString());
            localStorage.setItem('ADMIN_LATEST_ORDER_ID', order.id);
            
            // Show order popup
            showOrderPopup(order, name);
            
            // Clear cart
            localStorage.setItem('cleanbite_cart', '[]');
            
            // Update cart display
            const cartCount = document.getElementById('cartCount');
            if (cartCount) cartCount.textContent = '0';
            
            // Close checkout modal
            const checkoutModal = document.getElementById('checkoutModal');
            if (checkoutModal) checkoutModal.classList.remove('active');
            
            // Reset button after 2 seconds
            setTimeout(() => {
                this.innerHTML = originalText;
                this.disabled = false;
                console.log('✅ Button reset after 2 seconds');
            }, 2000);
        });
        
        console.log('✅ Submit button ready');
    }

    // ==================== SHOW ORDER POPUP ====================
    function showOrderPopup(order, customerName) {
        // Create popup container
        const popupContainer = document.createElement('div');
        popupContainer.id = 'orderPopup';
        popupContainer.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
            cursor: pointer;
        `;
        
        // Close when clicking backdrop
        popupContainer.addEventListener('click', function(e) {
            if (e.target === popupContainer) {
                popupContainer.remove();
            }
        });
        
        // Popup content
        popupContainer.innerHTML = `
            <div style="
                background: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 450px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                position: relative;
                cursor: default;
            ">
                <!-- Close button -->
                <button onclick="document.getElementById('orderPopup').remove()" style="
                    position: absolute;
                    top: 15px;
                    right: 15px;
                    background: #f1f5f9;
                    border: none;
                    width: 35px;
                    height: 35px;
                    border-radius: 50%;
                    font-size: 20px;
                    color: #64748b;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                ">✕</button>
                
                <div style="font-size: 60px; color: #2ecc71; margin-bottom: 15px;">
                    <i class="fas fa-check-circle"></i>
                </div>
                
                <h2 style="color: #2c3e50; margin-bottom: 10px;">Order Received!</h2>
                <p style="color: #7f8c8d; margin-bottom: 20px;">Thank you, <strong>${customerName}</strong>!</p>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <p style="color: #2c3e50; margin-bottom: 5px; font-size: 13px;">YOUR ORDER ID</p>
                    <p style="font-size: 24px; font-weight: 700; color: #2ecc71; letter-spacing: 1px; word-break: break-all; background: white; padding: 10px; border-radius: 8px; border: 1px solid #e2e8f0;">
                        ${order.id}
                    </p>
                    <p style="color: #f39c12; font-weight: 600; margin-top: 10px; font-size: 14px;">
                        <i class="fas fa-clock"></i> Pending Payment Verification
                    </p>
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button onclick="document.getElementById('orderPopup').remove()" style="
                        background: #2ecc71;
                        color: white;
                        border: none;
                        padding: 12px 25px;
                        border-radius: 50px;
                        font-weight: 600;
                        cursor: pointer;
                        flex: 1;
                    ">OK</button>
                    
                    <button onclick="window.open('track.html?order=${order.id}', '_blank'); document.getElementById('orderPopup').remove()" style="
                        background: #3498db;
                        color: white;
                        border: none;
                        padding: 12px 25px;
                        border-radius: 50px;
                        font-weight: 600;
                        cursor: pointer;
                        flex: 1;
                    ">Track Order</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(popupContainer);
    }

    // ==================== ADD TO CART ====================
    function addToCart(itemId) {
        const item = menuItems.find(i => i.id == itemId);
        const qtyEl = document.getElementById(`qty-${itemId}`);
        const quantity = parseInt(qtyEl.textContent);
        
        const existingItem = cart.find(i => i.id == itemId);
        
        if (existingItem) {
            existingItem.quantity += quantity;
        } else {
            cart.push({
                id: item.id,
                name: item.name,
                price: item.price,
                quantity: quantity,
                image: item.image
            });
        }
        
        qtyEl.textContent = 1;
        localStorage.setItem('cleanbite_cart', JSON.stringify(cart));
        updateCartDisplay();
        showNotification(`${item.name} added to cart`, 'success');
    }

    // ==================== UPDATE CART DISPLAY ====================
    function updateCartDisplay() {
        const cartCount = document.getElementById('cartCount');
        if (cartCount) {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }
        
        const cartItemsContainer = document.getElementById('cartItems');
        if (cartItemsContainer) {
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<div style="text-align: center; padding: 40px;"><i class="fas fa-shopping-cart" style="font-size: 48px; color: #ddd;"></i><p style="color: #7f8c8d;">Your cart is empty</p></div>';
            } else {
                cartItemsContainer.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-image" style="background-image: url('${item.image}');"></div>
                        <div class="cart-item-details">
                            <div class="cart-item-title">${item.name}</div>
                            <div class="cart-item-price">₦${item.price.toLocaleString()}</div>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="cart-quantity-btn" onclick="window.updateCartQuantity(${item.id}, -1)">-</button>
                            <span style="font-weight: 600; min-width: 30px; text-align: center;">${item.quantity}</span>
                            <button class="cart-quantity-btn" onclick="window.updateCartQuantity(${item.id}, 1)">+</button>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const vat = subtotal * 0.075;
        const total = subtotal + vat;
        
        document.getElementById('cartSubtotal').textContent = `₦${subtotal.toLocaleString()}`;
        document.getElementById('cartVat').textContent = `₦${vat.toLocaleString()}`;
        document.getElementById('cartTotal').textContent = `₦${total.toLocaleString()}`;
    }

    // ==================== UPDATE CART QUANTITY ====================
    window.updateCartQuantity = function(itemId, change) {
        const item = cart.find(i => i.id == itemId);
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                cart = cart.filter(i => i.id != itemId);
            }
            localStorage.setItem('cleanbite_cart', JSON.stringify(cart));
            updateCartDisplay();
        }
    };

    // ==================== CLEAR CART ====================
    function clearCart() {
        cart = [];
        localStorage.setItem('cleanbite_cart', JSON.stringify(cart));
        updateCartDisplay();
        showNotification('Cart cleared', 'info');
    }

    // ==================== OPEN CART MODAL ====================
    function openCartModal() {
        updateCartDisplay();
        document.getElementById('cartModal').classList.add('active');
    }

    // ==================== OPEN CHECKOUT MODAL ====================
    function openCheckoutModal() {
        if (cart.length === 0) {
            showNotification('Your cart is empty', 'warning');
            return;
        }
        document.getElementById('orderForm')?.reset();
        document.getElementById('paymentTransfer').checked = true;
        document.getElementById('bankDetails').style.display = 'block';
        document.getElementById('cashDetails').style.display = 'none';
        closeModal('cartModal');
        document.getElementById('checkoutModal').classList.add('active');
    }

    // ==================== SHOW ORDER CONFIRMATION ====================
    function showOrderConfirmation(order) {
        document.getElementById('confirmCustomerName').textContent = order.customerName || 'Customer';
        document.getElementById('confirmOrderId').textContent = order.id;
        document.getElementById('confirmTotal').textContent = `₦${(order.total || 0).toLocaleString()}`;
        
        const trackBtn = document.getElementById('trackOrderBtn');
        if (trackBtn) {
            trackBtn.href = `track.html?order=${order.id}`;
        }
        
        document.getElementById('confirmationModal').classList.add('active');
    }

    // ==================== VALIDATE CHECKOUT FORM ====================
    function validateCheckoutForm() {
        const name = document.getElementById('customerName')?.value.trim();
        const phone = document.getElementById('customerPhone')?.value.trim();
        
        if (!name || name.length < 2) {
            showNotification('Please enter a valid name', 'warning');
            return false;
        }
        if (!phone || phone.length < 10) {
            showNotification('Please enter a valid phone number', 'warning');
            return false;
        }
        return true;
    }

    // ==================== CLOSE MODAL ====================
    window.closeModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) modal.classList.remove('active');
    };

    // ==================== SETUP PARALLAX ====================
    function setupParallax() {
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const layer2 = document.getElementById('parallaxLayer2');
            if (layer2) {
                layer2.style.transform = `translateY(${scrolled * 0.2}px)`;
            }
        });
    }

    // ==================== SHOW NOTIFICATION ====================
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `notification-toast ${type}`;
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            color: #2c3e50;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 9999;
            border-left: 4px solid ${type === 'success' ? '#2ecc71' : '#f39c12'};
            animation: slideIn 0.3s ease;
        `;
        notification.innerHTML = `
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}" style="color: ${type === 'success' ? '#2ecc71' : '#f39c12'};"></i>
            <span>${message}</span>
            <button onclick="this.parentElement.remove()" style="background: none; border: none; color: #95a5a6; cursor: pointer; margin-left: auto;">✕</button>
        `;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 5000);
    }

    // ==================== LIVE KITCHEN SYSTEM ====================
    class LiveKitchenSystem {
        constructor() {
            this.kitchenData = { preparing: 0, incubating: 0, ready: 0, completed: 0 };
            this.activityLog = [];
            this.init();
        }

        init() {
            console.log('👨‍🍳 Live Kitchen Ready');
            this.loadKitchenData();
            this.setupActivityFeed();
            setInterval(() => this.loadKitchenData(), 10000);
        }

        loadKitchenData() {
            const orders = JSON.parse(localStorage.getItem('cleanbite_orders') || '[]');
            this.kitchenData = { preparing: 0, incubating: 0, ready: 0, completed: 0 };
            
            orders.forEach(order => {
                if (order.paymentStatus === 'verified') {
                    if (order.status === 'preparing') this.kitchenData.preparing++;
                    else if (order.status === 'incubating') this.kitchenData.incubating++;
                    else if (order.status === 'ready') this.kitchenData.ready++;
                    else if (order.status === 'completed') this.kitchenData.completed++;
                }
            });
            
            this.updateDisplay();
        }

        handleNewOrder(order) {
            this.logActivity(`🛒 New order ${order.id.slice(-8)} from ${order.customerName}`, 'order_created', order.id, order.customerName);
        }

        logActivity(message, type, orderId, customerName) {
            const activity = {
                id: Date.now(),
                message,
                type,
                orderId,
                customerName,
                timestamp: new Date().toISOString(),
                icon: this.getActivityIcon(type),
                color: this.getActivityColor(type)
            };
            this.activityLog.unshift(activity);
            if (this.activityLog.length > 20) this.activityLog.pop();
            this.updateActivityFeed();
        }

        getActivityIcon(type) {
            const icons = { 'order_created': 'fa-cart-plus', 'payment_verified': 'fa-check-circle' };
            return icons[type] || 'fa-bell';
        }

        getActivityColor(type) {
            const colors = { 'order_created': '#9b59b6', 'payment_verified': '#2ecc71' };
            return colors[type] || '#3498db';
        }

        setupActivityFeed() {
            setInterval(() => this.updateActivityFeed(), 10000);
        }

        updateActivityFeed() {
            const feed = document.getElementById('activityFeed');
            if (!feed) return;
            
            if (this.activityLog.length === 0) {
                feed.innerHTML = '<div class="activity-item"><div class="activity-icon"><i class="fas fa-mug-hot"></i></div><div class="activity-content"><div class="activity-text">Waiting for orders...</div></div></div>';
                return;
            }
            
            feed.innerHTML = this.activityLog.slice(0, 8).map(activity => {
                const time = new Date(activity.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                return `
                    <div class="activity-item" style="border-left-color: ${activity.color};">
                        <div class="activity-icon" style="color: ${activity.color};"><i class="fas ${activity.icon}"></i></div>
                        <div class="activity-content">
                            <div class="activity-text">${activity.message}</div>
                            <div class="activity-meta"><span class="activity-time">${time}</span></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        updateDisplay() {
            document.getElementById('preparingCount').textContent = this.kitchenData.preparing;
            document.getElementById('incubatingCount').textContent = this.kitchenData.incubating;
            document.getElementById('readyCount').textContent = this.kitchenData.ready;
            document.getElementById('completedCount').textContent = this.kitchenData.completed;
        }

        generateOrderId() {
            return 'CB-' + Date.now().toString().slice(-6) + '-' + Math.random().toString(36).substring(2, 5).toUpperCase();
        }
    }

    // Make functions globally available
    window.addToCart = addToCart;
    window.openCartModal = openCartModal;
    window.closeModal = closeModal;
    window.showNotification = showNotification;
    window.updateCartQuantity = updateCartQuantity;
    
    console.log('✅ COMPLETE ORDER PAGE LOADED - ALL FIXES APPLIED');

// ==================== LIVE ACTIVITY FEED - SYNC WITH DASHBOARD ====================
// This code goes in your Order Page - replaces existing activity feed logic

// Initialize broadcast listener when page loads
document.addEventListener('DOMContentLoaded', function() {
    initActivityFeed();
});

// ==================== LIVE ACTIVITY FEED - SYNC WITH ADMIN DASHBOARD ====================
// Uses EXACT same message format as Admin Dashboard

document.addEventListener('DOMContentLoaded', function() {
    initActivityFeed();
});

// ==================== ORDER PAGE LIVE ACTIVITY FEED ====================
// Listens to the SAME data source as Admin Dashboard

function initActivityFeed() {
    console.log('📡 Initializing Live Activity Feed - Reading from cleanbite_orders');
    
    const feed = document.getElementById('activityFeed');
    if (feed) {
        feed.innerHTML = '<div class="activity-loading"><i class="fas fa-circle-notch fa-spin"></i> Loading kitchen activities...</div>';
    }
    
    // Load activities immediately
    loadActivityFeed();
    
    // Listen for changes to cleanbite_orders (INSTANT updates)
    window.addEventListener('storage', function(event) {
        if (event.key === 'cleanbite_orders') {
            console.log('🔄 Orders updated - refreshing feed');
            loadActivityFeed();
        }
    });
    
    // Poll every 5 seconds as backup (in case storage event doesn't fire)
    setInterval(loadActivityFeed, 5000);
}

function loadActivityFeed() {
    try {
        const orders = JSON.parse(localStorage.getItem('cleanbite_orders') || '[]');
        const activities = [];
        
        // Sort orders by most recent first
        const sortedOrders = [...orders].sort((a, b) => 
            new Date(b.updatedAt || b.createdAt || 0) - new Date(a.updatedAt || a.createdAt || 0)
        );
        
        // Take last 20 orders
        sortedOrders.slice(0, 20).forEach(order => {
            // Payment verifications
            if (order.verifiedAt) {
                activities.push({
                    type: 'payment_verified',
                    message: `💰 Payment verified for order ${order.id.slice(-8)}`,
                    customerName: order.customerName,
                    orderId: order.id,
                    timestamp: order.verifiedAt,
                    icon: 'fa-check-circle',
                    color: '#2ecc71'
                });
            }
            
            // Status changes
            if (order.updatedAt && order.status) {
                let message = '';
                let icon = '';
                let color = '';
                
                switch(order.status) {
                    case 'preparing':
                        message = `👨‍🍳 Order ${order.id.slice(-8)} started preparation`;
                        icon = 'fa-utensils';
                        color = '#f39c12';
                        break;
                    case 'incubating':
                        message = `⏱️ Order ${order.id.slice(-8)} moved to incubating (24hr countdown started)`;
                        icon = 'fa-fire';
                        color = '#e74c3c';
                        break;
                    case 'ready':
                        message = `✅ Order ${order.id.slice(-8)} is READY for pickup`;
                        icon = 'fa-check-circle';
                        color = '#2ecc71';
                        break;
                    case 'completed':
                        message = `📦 Order ${order.id.slice(-8)} completed and picked up`;
                        icon = 'fa-flag-checkered';
                        color = '#27ae60';
                        break;
                    case 'cancelled':
                        message = `❌ Order ${order.id.slice(-8)} was cancelled`;
                        icon = 'fa-times-circle';
                        color = '#e74c3c';
                        break;
                }
                
                if (message) {
                    activities.push({
                        type: 'status_change',
                        message: message,
                        customerName: order.customerName,
                        orderId: order.id,
                        timestamp: order.updatedAt,
                        icon: icon,
                        color: color
                    });
                }
            }
            
            // New orders
            if (order.createdAt && !order.verifiedAt && order.paymentStatus === 'pending') {
                activities.push({
                    type: 'order_created',
                    message: `🛒 New order ${order.id.slice(-8)} from ${order.customerName || 'Customer'}`,
                    customerName: order.customerName,
                    orderId: order.id,
                    timestamp: order.createdAt,
                    icon: 'fa-cart-plus',
                    color: '#9b59b6'
                });
            }
        });
        
        // Sort by timestamp (most recent first)
        activities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        // Remove duplicates (keep only most recent of each type per order)
        const uniqueActivities = [];
        const seen = new Set();
        
        activities.forEach(activity => {
            const key = `${activity.orderId}-${activity.type}`;
            if (!seen.has(key)) {
                seen.add(key);
                uniqueActivities.push(activity);
            }
        });
        
        renderActivityFeed(uniqueActivities.slice(0, 15));
        
    } catch (error) {
        console.error('Error loading activity feed:', error);
    }
}

function renderActivityFeed(activities) {
    const feedContainer = document.getElementById('activityFeed');
    if (!feedContainer) return;
    
    if (activities.length === 0) {
        feedContainer.innerHTML = `
            <div class="empty-activity">
                <i class="fas fa-mug-hot"></i>
                <p>No recent activities</p>
                <small>Activities will appear here as orders progress</small>
            </div>
        `;
        return;
    }
    
    const activitiesHTML = activities.map(activity => {
        const timeAgo = getTimeAgo(activity.timestamp);
        const timeFull = new Date(activity.timestamp).toLocaleTimeString([], {
            hour: '2-digit',
            minute: '2-digit'
        });
        
        return `
            <div class="activity-item" style="border-left-color: ${activity.color}">
                <div class="activity-icon" style="color: ${activity.color}">
                    <i class="fas ${activity.icon}"></i>
                </div>
                <div class="activity-content">
                    <div class="activity-text">${activity.message}</div>
                    <div class="activity-meta">
                        <span class="activity-time" title="${timeFull}">
                            <i class="far fa-clock"></i> ${timeAgo}
                        </span>
                        ${activity.customerName ? 
                            `<span class="activity-customer">
                                <i class="fas fa-user"></i> ${activity.customerName}
                            </span>` : ''}
                        ${activity.orderId ? 
                            `<span class="activity-order">
                                <i class="fas fa-hashtag"></i> ${activity.orderId.slice(-8)}
                            </span>` : ''}
                    </div>
                </div>
            </div>
        `;
    }).join('');
    
    feedContainer.innerHTML = activitiesHTML;
}

function getTimeAgo(timestamp) {
    if (!timestamp) return 'Just now';
    
    const now = new Date();
    const past = new Date(timestamp);
    const diffMs = now - past;
    const diffMin = Math.floor(diffMs / 60000);
    const diffHour = Math.floor(diffMin / 60);
    const diffDay = Math.floor(diffHour / 24);
    
    if (diffMin < 1) return 'Just now';
    if (diffMin < 60) return `${diffMin} minute${diffMin > 1 ? 's' : ''} ago`;
    if (diffHour < 24) return `${diffHour} hour${diffHour > 1 ? 's' : ''} ago`;
    if (diffDay < 7) return `${diffDay} day${diffDay > 1 ? 's' : ''} ago`;
    
    return past.toLocaleDateString();
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    initActivityFeed();
});

// Add CSS for the activity feed
const style = document.createElement('style');
style.textContent = `
    .empty-activity {
        text-align: center;
        padding: 40px 20px;
        background: rgba(255,255,255,0.05);
        border-radius: 16px;
        color: rgba(255,255,255,0.6);
    }
    
    .empty-activity i {
        font-size: 48px;
        color: #ffd166;
        margin-bottom: 15px;
    }
    
    .activity-loading {
        text-align: center;
        padding: 40px;
        color: rgba(255,255,255,0.6);
    }
    
    .activity-loading i {
        color: #ffd166;
        margin-right: 8px;
    }
`;
document.head.appendChild(style);

console.log('✅ Live Activity Feed initialized - Listening to cleanbite_orders');        
</script>

    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
// Your Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyC1WaO1WE-LFayAqLeql0BP5vD8bddgUuE",
    authDomain: "cleanbite-empire.firebaseapp.com",
    databaseURL: "https://cleanbite-empire-default-rtdb.firebaseio.com",
    projectId: "cleanbite-empire",
    storageBucket: "cleanbite-empire.firebasestorage.app",
    messagingSenderId: "733995841314",
    appId: "1:733995841314:web:d82f5452f1fff0fdfad77b"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const database = firebase.database();
console.log('🔥 Firebase connected on order page');
</script>

    
    <!-- ===== ADD FIREBASE CODE HERE - RIGHT BEFORE </body> ===== -->
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyC1WaO1WE-LFayAqLeql0BP5vD8bddgUuE",
        authDomain: "cleanbite-empire.firebaseapp.com",
        databaseURL: "https://cleanbite-empire-default-rtdb.firebaseio.com",
        projectId: "cleanbite-empire",
        storageBucket: "cleanbite-empire.firebasestorage.app",
        messagingSenderId: "733995841314",
        appId: "1:733995841314:web:d82f5452f1fff0fdfad77b"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    
    // ===== LIVE KITCHEN STATS =====
    function loadKitchenStats() {
        database.ref('orders').on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) return;
            
            const orders = Object.values(data);
            
            document.getElementById('preparingCount').textContent = 
                orders.filter(o => o.paymentStatus === 'verified' && o.status === 'preparing').length;
            document.getElementById('incubatingCount').textContent = 
                orders.filter(o => o.paymentStatus === 'verified' && o.status === 'incubating').length;
            document.getElementById('readyCount').textContent = 
                orders.filter(o => o.paymentStatus === 'verified' && o.status === 'ready').length;
            document.getElementById('completedCount').textContent = 
                orders.filter(o => o.paymentStatus === 'verified' && o.status === 'completed').length;
        });
    }
    
    // ===== LIVE ACTIVITY FEED =====
    function loadActivityFeed() {
        database.ref('orders').on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) return;
            
            const orders = Object.values(data);
            const activities = [];
            
            orders.forEach(order => {
                if (order.verifiedAt) activities.push({
                    message: `💰 Payment verified for order ${order.id.slice(-8)}`,
                    timestamp: order.verifiedAt,
                    icon: 'fa-check-circle',
                    color: '#2ecc71'
                });
                
                if (order.updatedAt && order.status) {
                    let msg = '';
                    if (order.status === 'preparing') msg = `👨‍🍳 Order ${order.id.slice(-8)} started preparation`;
                    if (order.status === 'incubating') msg = `⏱️ Order ${order.id.slice(-8)} moved to incubating`;
                    if (order.status === 'ready') msg = `✅ Order ${order.id.slice(-8)} is READY`;
                    if (order.status === 'completed') msg = `📦 Order ${order.id.slice(-8)} completed`;
                    
                    if (msg) activities.push({
                        message: msg,
                        timestamp: order.updatedAt,
                        icon: 'fa-sync-alt',
                        color: '#3498db'
                    });
                }
            });
            
            activities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            const feed = document.getElementById('activityFeed');
            if (feed) {
                feed.innerHTML = activities.slice(0, 10).map(a => `
                    <div class="activity-item" style="border-left-color: ${a.color}">
                        <div class="activity-icon" style="color: ${a.color}"><i class="fas ${a.icon}"></i></div>
                        <div class="activity-content">
                            <div class="activity-text">${a.message}</div>
                            <div class="activity-time">${getTimeAgo(a.timestamp)}</div>
                        </div>
                    </div>
                `).join('');
            }
        });
    }
    
    function getTimeAgo(t) {
        if (!t) return 'Just now';
        const m = Math.floor((new Date() - new Date(t)) / 60000);
        if (m < 1) return 'Just now';
        if (m < 60) return `${m}m ago`;
        if (m < 1440) return `${Math.floor(m / 60)}h ago`;
        return `${Math.floor(m / 1440)}d ago`;
    }
    
    // Initialize
    loadKitchenStats();
    loadActivityFeed();
    </script>
        <!-- Your existing HTML content -->
    
    <!-- Your existing script with cart, menu, checkout functions -->
    <script>
        // ==================== YOUR EXISTING ORDER PAGE CODE ====================
        // All your current functions: renderMenu(), addToCart(), updateCartDisplay(), 
        // openCheckoutModal(), submitOrderBtn, etc.
    </script>
    
    <!-- ===== ADD LIVE KITCHEN STATS AND FEEDS HERE - RIGHT BEFORE </body> ===== -->
    <!-- Firebase SDKs (if not already added) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
    // ==================== FIREBASE CONFIG ====================
    const firebaseConfig = {
        apiKey: "AIzaSyC1WaO1WE-LFayAqLeql0BP5vD8bddgUuE",
        authDomain: "cleanbite-empire.firebaseapp.com",
        databaseURL: "https://cleanbite-empire-default-rtdb.firebaseio.com",
        projectId: "cleanbite-empire",
        storageBucket: "cleanbite-empire.firebasestorage.app",
        messagingSenderId: "733995841314",
        appId: "1:733995841314:web:d82f5452f1fff0fdfad77b"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    
    // ==================== LIVE KITCHEN STATS ====================
    // This updates the 4 stat boxes (Preparing, Incubating, Ready, Completed)
    function loadKitchenStats() {
        const ordersRef = database.ref('orders');
        
        ordersRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) return;
            
            // Convert to array
            const orders = Object.values(data);
            
            // Calculate counts
            const preparing = orders.filter(o => 
                o.paymentStatus === 'verified' && o.status === 'preparing'
            ).length;
            
            const incubating = orders.filter(o => 
                o.paymentStatus === 'verified' && o.status === 'incubating'
            ).length;
            
            const ready = orders.filter(o => 
                o.paymentStatus === 'verified' && o.status === 'ready'
            ).length;
            
            const completed = orders.filter(o => 
                o.paymentStatus === 'verified' && o.status === 'completed'
            ).length;
            
            // Update the DOM
            document.getElementById('preparingCount').textContent = preparing;
            document.getElementById('incubatingCount').textContent = incubating;
            document.getElementById('readyCount').textContent = ready;
            document.getElementById('completedCount').textContent = completed;
            
            console.log('📊 Kitchen stats updated:', { preparing, incubating, ready, completed });
        });
    }
    
    // ==================== LIVE ACTIVITY FEED ====================
    // This updates the activity feed with real-time events
    function loadActivityFeed() {
        const ordersRef = database.ref('orders');
        
        ordersRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) return;
            
            const orders = Object.values(data);
            const activities = [];
            
            // Generate activities from orders
            orders.forEach(order => {
                // Payment verifications
                if (order.verifiedAt) {
                    activities.push({
                        message: `💰 Payment verified for order ${order.id.slice(-8)}`,
                        timestamp: order.verifiedAt,
                        icon: 'fa-check-circle',
                        color: '#2ecc71'
                    });
                }
                
                // Status changes
                if (order.updatedAt && order.status) {
                    let message = '';
                    if (order.status === 'preparing') 
                        message = `👨‍🍳 Order ${order.id.slice(-8)} started preparation`;
                    if (order.status === 'incubating') 
                        message = `⏱️ Order ${order.id.slice(-8)} moved to incubating`;
                    if (order.status === 'ready') 
                        message = `✅ Order ${order.id.slice(-8)} is READY for pickup`;
                    if (order.status === 'completed') 
                        message = `📦 Order ${order.id.slice(-8)} completed`;
                    
                    if (message) {
                        activities.push({
                            message: message,
                            timestamp: order.updatedAt,
                            icon: 'fa-sync-alt',
                            color: '#3498db'
                        });
                    }
                }
                
                // New orders
                if (order.createdAt && !order.verifiedAt) {
                    activities.push({
                        message: `🛒 New order ${order.id.slice(-8)} received`,
                        timestamp: order.createdAt,
                        icon: 'fa-cart-plus',
                        color: '#9b59b6'
                    });
                }
            });
            
            // Sort by most recent first
            activities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Render to feed
            const feed = document.getElementById('activityFeed');
            if (feed) {
                feed.innerHTML = activities.slice(0, 10).map(a => `
                    <div class="activity-item" style="border-left-color: ${a.color}">
                        <div class="activity-icon" style="color: ${a.color}">
                            <i class="fas ${a.icon}"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-text">${a.message}</div>
                            <div class="activity-time">${getTimeAgo(a.timestamp)}</div>
                        </div>
                    </div>
                `).join('');
            }
        });
    }
    
    // Helper: Convert timestamp to "X ago"
    function getTimeAgo(timestamp) {
        if (!timestamp) return 'Just now';
        
        const now = new Date();
        const past = new Date(timestamp);
        const diffMin = Math.floor((now - past) / 60000);
        
        if (diffMin < 1) return 'Just now';
        if (diffMin < 60) return `${diffMin}m ago`;
        if (diffMin < 1440) return `${Math.floor(diffMin / 60)}h ago`;
        return `${Math.floor(diffMin / 1440)}d ago`;
    }
    
    // ==================== INITIALIZE ====================
    // Start both listeners when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadKitchenStats();
        loadActivityFeed();
        console.log('✅ Live Kitchen and Activity Feed initialized with Firebase');
    });
    </script>  
</body>
</html>

